# Supabase é›†æˆå®ŒæˆçŠ¶æ€

## âœ… å·²å®Œæˆçš„é›†æˆ

### 1. æ ¸å¿ƒåŸºç¡€è®¾æ–½

- **Supabase å®¢æˆ·ç«¯** (`services/supabase.ts`) - å·²åˆ›å»ºå¹¶é…ç½®
- **ç”¨æˆ·ä¸Šä¸‹æ–‡** (`context/UserContext.tsx`) - å®Œæ•´é›†æˆ Supabase Auth å’Œæ•°æ®æ“ä½œ
- **è®¤è¯ç»„ä»¶** (`components/Auth.tsx`) - ç™»å½•/æ³¨å†Œæ¨¡æ€æ¡†
- **å¸ƒå±€ç»„ä»¶** (`components/Layouts.tsx`) - åŸºäºä¼šè¯çŠ¶æ€çš„æ¡ä»¶æ¸²æŸ“

### 2. ç®¡ç†åå°é¡µé¢ (`pages/Admin.tsx`)

| åŠŸèƒ½     | çŠ¶æ€                       | æ•°æ®è¡¨                             |
| -------- | -------------------------- | ---------------------------------- |
| è´§å¸ç®¡ç† | âœ…                         | `currencies`                       |
| è¿è´¹æ¨¡æ¿ | âœ…                         | `shipping_zones`, `shipping_rates` |
| æ”¯ä»˜é…ç½® | ğŸ”¸ UI å®Œæˆï¼Œæ•°æ®æ“ä½œå¾…å®ç° | `system_settings`                  |

### 3. å•†åŸé¡µé¢ (`pages/Commerce.tsx`)

| åŠŸèƒ½     | çŠ¶æ€                | æ•°æ®è¡¨     |
| -------- | ------------------- | ---------- |
| äº§å“åˆ—è¡¨ | âœ…                  | `products` |
| äº§å“è¯¦æƒ… | ğŸ”¸ ç¡¬ç¼–ç ï¼Œå¾…åŠ¨æ€åŒ– | `products` |

### 4. å’¨è¯¢é¡µé¢ (`pages/Consultation.tsx`)

| åŠŸèƒ½     | çŠ¶æ€       | æ•°æ®è¡¨                  |
| -------- | ---------- | ----------------------- |
| ä¸“å®¶åˆ—è¡¨ | âœ…         | `experts`               |
| é¢„çº¦æµç¨‹ | âœ… UI å®Œæˆ | `consultations`         |
| è®¢å•åˆ›å»º | âœ…         | `orders`, `order_items` |

### 5. ç”¨æˆ·ä»ªè¡¨ç›˜ (`pages/UserDashboard.tsx`)

| åŠŸèƒ½     | çŠ¶æ€                | æ•°æ®è¡¨                  |
| -------- | ------------------- | ----------------------- |
| æ¡£æ¡ˆåˆ—è¡¨ | âœ… é€šè¿‡ UserContext | `archives`              |
| è®¢å•å†å² | âœ… é€šè¿‡ UserContext | `orders`, `order_items` |

### 6. AI åŠŸèƒ½ (`pages/AppFeatures.tsx`)

| åŠŸèƒ½         | çŠ¶æ€ | è¯´æ˜              |
| ------------ | ---- | ----------------- |
| å æ˜ŸæŠ¥å‘Šç”Ÿæˆ | âœ…   | ä¿å­˜åˆ° `archives` |
| å¡”ç½—è§£è¯»     | âœ…   | ä¿å­˜åˆ° `archives` |

---

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. åœ¨ Supabase æ‰§è¡Œ SQL è„šæœ¬

åœ¨ Supabase Dashboard çš„ SQL Editor ä¸­è¿è¡Œ `supabase_init.sql` æ–‡ä»¶å†…å®¹ã€‚

### 2. é…ç½®ç¯å¢ƒå˜é‡

ç¡®ä¿ `.env.local` åŒ…å«æ­£ç¡®çš„ Supabase å‡­æ®ï¼š

```
VITE_SUPABASE_URL=your-project-url
VITE_SUPABASE_ANON_KEY=your-anon-key
```

### 3. å¾…å®Œå–„åŠŸèƒ½

- [ ] äº§å“è¯¦æƒ…é¡µåŠ¨æ€æ•°æ®è·å–
- [ ] æ”¯ä»˜é…ç½®çš„ CRUD æ“ä½œ
- [ ] ä¸“å®¶é¢„çº¦çš„å®Œæ•´æµç¨‹
- [ ] AI åŠŸèƒ½è¿ç§»åˆ° Edge Functionsï¼ˆå®‰å…¨è€ƒè™‘ï¼‰

---

## ğŸ—‚ï¸ æ•°æ®åº“è¡¨ç»“æ„

| è¡¨å              | ç”¨é€”          |
| ----------------- | ------------- |
| `profiles`        | ç”¨æˆ·èµ„æ–™      |
| `system_settings` | ç³»ç»Ÿé…ç½®      |
| `currencies`      | è´§å¸è®¾ç½®      |
| `shipping_zones`  | è¿è´¹åŒºåŸŸ      |
| `shipping_rates`  | è¿è´¹è´¹ç‡      |
| `products`        | äº§å“          |
| `experts`         | ä¸“å®¶          |
| `consultations`   | å’¨è¯¢æœåŠ¡      |
| `orders`          | è®¢å•          |
| `order_items`     | è®¢å•æ˜ç»†      |
| `archives`        | ç”¨æˆ·æ¡£æ¡ˆ/æŠ¥å‘Š |

---

## ğŸ” RLS ç­–ç•¥

å·²é…ç½®çš„å®‰å…¨ç­–ç•¥ï¼š

- ç”¨æˆ·åªèƒ½æŸ¥çœ‹/æ›´æ–°è‡ªå·±çš„ `profiles`
- ç”¨æˆ·åªèƒ½æŸ¥çœ‹/åˆ›å»ºè‡ªå·±çš„ `archives`
- ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ `orders`
- æ‰€æœ‰äººå¯æŸ¥çœ‹ `products` å’Œ `experts`
